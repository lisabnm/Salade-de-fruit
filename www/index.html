<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="Content-Security-Policy" content="default-src 'self' data: gap: https://ssl.gstatic.com 'unsafe-inline' 'unsafe-eval'; style-src 'self' 'unsafe-inline'; media-src *; connect-src *">
        <meta name="format-detection" content="telephone=no">
        <meta name="msapplication-tap-highlight" content="no">
        <meta name="viewport" content="initial-scale=1, width=device-width, viewport-fit=cover">
        <meta name="color-scheme" content="light dark">
        <link rel="stylesheet" href="css/bootstrap.css">
        <link rel="stylesheet" href="css/article.css">
        <title>Salade de fruit</title>
    </head>
    <body>
        <div id="nav">
            <nav class="navbar navbar-dark bg-dark">
                <div>
                    <img src="img/logo.png" width="80px">
                </div>
            </nav>

        </div>

        <div id="accueil" class="ac">
            <h1>Rechercher un fruit pour connaitre ses caractéristiques </h1>
            <br>
            <input type="text" id="nomFruit" class="form-control" placeholder="Nom d'un fruit">
            <br>
            <div type="submit" class="btn btn-primary" onclick="controle()">Rechercher</div>


        </div>

        <div id="article">
            <center>
            <h1 id=nameFruit></h1>
            <img src="..." id="image" width="200px" class="img-thumbnail">
            <div id="nutri">
                
            </div>
            </center>
        </div>

        <script src="cordova.js"></script>
        <script src="js/index.js"></script>
        <script src="js/bootstrap.js"></script>
        <script type="text/javascript">
            document.getElementById("article").style.display="none"


            


            function controle(){
                var fruitRech = document.getElementById("nomFruit").value;
                console.log("vous avez saisi : " + fruitRech);
                document.getElementById("accueil").style.display = "none";
                document.getElementById("article").style.display = "block";
                document.getElementById("nameFruit").innerHTML = fruitRech;
                recherche(fruitRech);
            }
            //document.getElementById("nutri").innerHTML = fruit[0].nutritions.protein;

            function recherche(nomFruit){
                var fruit =  [{genus:"Malus",name:"Pomme",id:6,family:"Rosaceae",order:"Rosales",nutritions:{carbohydrates:11.4,protein:0.3,fat:0.4,calories:52,sugar:10.3}},{genus:"Prunus",name:"Abricot",id:35,family:"Rosaceae",order:"Rosales",nutritions:{carbohydrates:3.9,protein:0.5,fat:0.1,calories:15,sugar:3.2}},{genus:"Musa",name:"Banane",id:1,family:"Musaceae",order:"Zingiberales",nutritions:{carbohydrates:22,protein:1,fat:0.2,calories:96,sugar:17.2}},{genus:"Fragaria",name:"Myrtille",id:33,family:"Rosaceae",order:"Rosales",nutritions:{carbohydrates:5.5,protein:0,fat:0.4,calories:29,sugar:5.4}},{genus:"Prunus",name:"Cerise",id:9,family:"Rosaceae",order:"None",nutritions:{carbohydrates:12,protein:1,fat:0.3,calories:50,sugar:8}},{genus:"Psidium",name:"Goyave",id:37,family:"Myrtaceae",order:"Myrtales",nutritions:{carbohydrates:14,protein:2.6,fat:1,calories:68,sugar:9}},{genus:"Citrus",name:"Citron",id:26,family:"Rutaceae",order:"Sapindales",nutritions:{carbohydrates:9,protein:1.1,fat:0.3,calories:29,sugar:2.5}},{genus:"Mangifera",name:"Mange",id:27,family:"Anacardiaceae",order:"Sapindales",nutritions:{carbohydrates:15,protein:0.82,fat:0.38,calories:60,sugar:13.7}},{genus:"Citrus",name:"Orange",id:2,family:"Rutaceae",order:"Sapindales",nutritions:{carbohydrates:8.3,protein:1,fat:0.2,calories:43,sugar:8.2}},{genus:"Pyrus",name:"Poire",id:4,family:"Rosaceae",order:"Rosales",nutritions:{carbohydrates:15,protein:0.4,fat:0.1,calories:57,sugar:10}},{genus:"Ananas",name:"Ananas",id:10,family:"Bromeliaceae",order:"Poales",nutritions:{carbohydrates:13.12,protein:0.54,fat:0.12,calories:50,sugar:9.85}},{genus:"Rubus",name:"Framboise",id:23,family:"Rosaceae",order:"Rosales",nutritions:{carbohydrates:12,protein:1.2,fat:0.7,calories:53,sugar:4.4}},{genus:"Fragaria",name:"Fraise",id:3,family:"Rosaceae",order:"Rosales",nutritions:{carbohydrates:5.5,protein:0.8,fat:0.4,calories:29,sugar:5.4}},{genus:"Solanum",name:"Tomate",id:5,family:"Solanaceae",order:"Solanales",nutritions:{carbohydrates:3.9,protein:0.9,fat:0.2,calories:74,sugar:2.6}},{genus:"Citrullus",name:"Pasteque",id:25,family:"Cucurbitaceae",order:"Cucurbitales",nutritions:{carbohydrates:8,protein:0.6,fat:0.2,calories:30,sugar:6}}];

                var trouve = false

                fruit.forEach(function(fruit){
                    //console.log(fruit.name + " , " + nomFruit);
                    if (fruit.name.toLowerCase()==nomFruit.toLowerCase()){
                        console.log("fruit trouvé");
                        var genre = fruit.genus;
                        var family = fruit.family;
                        var order = fruit.order;
                        var glucides = fruit.nutritions.carbohydrates;
                        var prot = fruit.nutritions.protein;
                        var fat = fruit.nutritions.fat;
                        var calories = fruit.nutritions.calories;
                        var sucre = fruit.nutritions.sugar;
                        document.getElementById("image").setAttribute("src", "img/"+nomFruit.toLowerCase()+".png");
                        document.getElementById("nutri").innerHTML =
                        "<div class='article'>"+
                        "<br><br>Famille: "+family+
                        "<br><br>Genre: "+genre+
                        "<br><br> Ordre: "+order+
                        "<br><div class='trait'></div>"+
                        "<br>Nutrition: "+
                        "<br>Pour 100g"+
                        "<br><br>Glucides: "+ glucides+ " g"+
                        "<br><br>Protéines: "+ prot+ " g"+
                        "<br><br>Lipides: "+fat+ " g"+
                        "<br><br>Calories: " + calories+ " Kcal"+
                        "<br><br>Sucres: "+sucre+ " g"+
                        "<br></div>";
                        trouve = true;
                    }
                });
                console.log(trouve)
                if (trouve == false){
                    alert("fruit non trouvé")
                    document.getElementById("accueil").style.display = "block";
                    document.getElementById("article").style.display = "none";
                }

            }

        </script>
    </body>
</html>
